# ルートシグネチャについて
## ルートシグネチャとは
 - GPUに対してシェーダに必要なパラメータやリソースを通知するための仕組み
    ```
    device->CreateRootSignature(0,
                               signature->GetBufferPointer(),
                               signature->GetBufferSize(),
                               IID_PPV_ARGS(&rootSignature))
### ルートパラメータ
 - シェーダに渡されるパラメータやリソースのタイプを定義
 - ルートパラメータに沿ってシェーダーが必要とする情報をGPUに伝える
 - シェーダに渡されるディスクリプタテーブルを定義
   - 複数のルートパラメータを用意してそれらをルートシグネチャに設定しておく
   ```
    CD3DX12_ROOT_PARAMETER rootParameters[1];
    rootParameters[0].InitAsDescriptorTable(1, &descTable, D3D12_SHADER_VISIBILITY_PIXEL);
### 静的サンプラー（Static Samplers）
 - テクスチャサンプリングのためのサンプラーステート
   - サンプラーの数、設定、どのシェーダーステージで使うかなどを設定
## 描画命令時のルートシグネチャの設定
 - コマンドリスト内で描画を行う前に、ルートシグネチャをセットアップを行う
 - これにより、GPUは描画時に正確なパラメータやリソースを取得する手段が提供される
 - （グラフィックスパイプラインステートにも設定しておくがまた後述）
    ```
   commandList->SetGraphicsRootSignature(rootSignature.Get());
   ```

## ルートシグネチャをプログラマーが設定する理由
### メリット
 - 柔軟性と最適化
   - プログラマーがルートシグネチャを設定することで、GPUがどのようにデータやリソースにアクセスするかを制御できる。
     - これにより、特定の描画パスなどで最適なリソースを利用することが可能。
   - 特定の要件に合わせた最適なグラフィックスプログラムを構築できます
     - 様々なシーンに関する描画の仕様を具体的に決めることで、それをプログラマーがルートシグネチャの設定で最適化することでパフォーマンスを最大化できる
### デメリット
 - 複雑性
   - 多くのパラメータやリソースを正確に設定する必要があり、これがミスや混乱を引き起こす可能性がある。
   - 最適化を必要としないプロダクトの場合はむしろエラーの原因が増えるだけになってしまう
 - 手動更新の必要性
   - リソースの変更や異なる描画パスへの切り替えに伴い、ルートシグネチャを手動で更新する必要がある
   - これが適切に行われないと、正しいデータがシェーダに渡らない可能性がある









